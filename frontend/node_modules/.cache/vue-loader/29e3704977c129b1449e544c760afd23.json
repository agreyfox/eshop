{"remainingRequest":"/home/lq/ifb/src/eshop/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/lq/ifb/src/eshop/frontend/src/components/prompts/Info.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/lq/ifb/src/eshop/frontend/src/components/prompts/Info.vue","mtime":1583132470976},{"path":"/home/lq/ifb/src/eshop/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/lq/ifb/src/eshop/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/lq/ifb/src/eshop/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7bWFwU3RhdGUsIG1hcEdldHRlcnN9IGZyb20gJ3Z1ZXgnCmltcG9ydCBmaWxlc2l6ZSBmcm9tICdmaWxlc2l6ZScKaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnCmltcG9ydCB7IGZpbGVzIGFzIGFwaSB9IGZyb20gJ0AvYXBpJwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdpbmZvJywKICBjb21wdXRlZDogewogICAgLi4ubWFwU3RhdGUoWydyZXEnLCAnc2VsZWN0ZWQnXSksCiAgICAuLi5tYXBHZXR0ZXJzKFsnc2VsZWN0ZWRDb3VudCcsICdpc0xpc3RpbmcnXSksCiAgICBodW1hblNpemU6IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRDb3VudCA9PT0gMCB8fCAhdGhpcy5pc0xpc3RpbmcpIHsKICAgICAgICByZXR1cm4gZmlsZXNpemUodGhpcy5yZXEuc2l6ZSkKICAgICAgfQoKICAgICAgbGV0IHN1bSA9IDAKCiAgICAgIGZvciAobGV0IHNlbGVjdGVkIG9mIHRoaXMuc2VsZWN0ZWQpIHsKICAgICAgICBzdW0gKz0gdGhpcy5yZXEuaXRlbXNbc2VsZWN0ZWRdLnNpemUKICAgICAgfQoKICAgICAgcmV0dXJuIGZpbGVzaXplKHN1bSkKICAgIH0sCiAgICBodW1hblRpbWU6IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRDb3VudCA9PT0gMCkgewogICAgICAgIHJldHVybiBtb21lbnQodGhpcy5yZXEubW9kaWZpZWQpLmZyb21Ob3coKQogICAgICB9CgogICAgICByZXR1cm4gbW9tZW50KHRoaXMucmVxLml0ZW1zW3RoaXMuc2VsZWN0ZWRbMF1dKS5mcm9tTm93KCkKICAgIH0sCiAgICBuYW1lOiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkQ291bnQgPT09IDAgPyB0aGlzLnJlcS5uYW1lIDogdGhpcy5yZXEuaXRlbXNbdGhpcy5zZWxlY3RlZFswXV0ubmFtZQogICAgfSwKICAgIGRpcjogZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZENvdW50ID4gMSB8fCAodGhpcy5zZWxlY3RlZENvdW50ID09PSAwCiAgICAgICAgPyB0aGlzLnJlcS5pc0RpcgogICAgICAgIDogdGhpcy5yZXEuaXRlbXNbdGhpcy5zZWxlY3RlZFswXV0uaXNEaXIpCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBjaGVja3N1bTogYXN5bmMgZnVuY3Rpb24gKGV2ZW50LCBhbGdvKSB7CiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCkKCiAgICAgIGxldCBsaW5rCgogICAgICBpZiAodGhpcy5zZWxlY3RlZENvdW50KSB7CiAgICAgICAgbGluayA9IHRoaXMucmVxLml0ZW1zW3RoaXMuc2VsZWN0ZWRbMF1dLnVybAogICAgICB9IGVsc2UgewogICAgICAgIGxpbmsgPSB0aGlzLiRyb3V0ZS5wYXRoCiAgICAgIH0KCiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgaGFzaCA9IGF3YWl0IGFwaS5jaGVja3N1bShsaW5rLCBhbGdvKQogICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZQogICAgICAgIGV2ZW50LnRhcmdldC5pbm5lckhUTUwgPSBoYXNoCiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICB0aGlzLiRzaG93RXJyb3IoZSkKICAgICAgfQogICAgfQogIH0KfQo="},{"version":3,"sources":["Info.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Info.vue","sourceRoot":"src/components/prompts","sourcesContent":["<template>\n  <div class=\"card floating\">\n    <div class=\"card-title\">\n      <h2>{{ $t('prompts.fileInfo') }}</h2>\n    </div>\n\n    <div class=\"card-content\">\n      <p v-if=\"selected.length > 1\">{{ $t('prompts.filesSelected', { count: selected.length }) }}</p>\n\n      <p class=\"break-word\" v-if=\"selected.length < 2\"><strong>{{ $t('prompts.displayName') }}</strong> {{ name }}</p>\n      <p v-if=\"!dir || selected.length > 1\"><strong>{{ $t('prompts.size') }}:</strong> <span id=\"content_length\"></span> {{ humanSize }}</p>\n      <p v-if=\"selected.length < 2\"><strong>{{ $t('prompts.lastModified') }}:</strong> {{ humanTime }}</p>\n\n      <template v-if=\"dir && selected.length === 0\">\n        <p><strong>{{ $t('prompts.numberFiles') }}:</strong> {{ req.numFiles }}</p>\n        <p><strong>{{ $t('prompts.numberDirs') }}:</strong> {{ req.numDirs }}</p>\n      </template>\n\n      <template v-if=\"!dir\">\n        <p><strong>MD5: </strong><code><a @click=\"checksum($event, 'md5')\">{{ $t('prompts.show') }}</a></code></p>\n        <p><strong>SHA1: </strong><code><a @click=\"checksum($event, 'sha1')\">{{ $t('prompts.show') }}</a></code></p>\n        <p><strong>SHA256: </strong><code><a @click=\"checksum($event, 'sha256')\">{{ $t('prompts.show') }}</a></code></p>\n        <p><strong>SHA512: </strong><code><a @click=\"checksum($event, 'sha512')\">{{ $t('prompts.show') }}</a></code></p>\n      </template>\n    </div>\n\n    <div class=\"card-action\">\n      <button type=\"submit\"\n        @click=\"$store.commit('closeHovers')\"\n        class=\"button button--flat\"\n        :aria-label=\"$t('buttons.ok')\"\n        :title=\"$t('buttons.ok')\">{{ $t('buttons.ok') }}</button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {mapState, mapGetters} from 'vuex'\nimport filesize from 'filesize'\nimport moment from 'moment'\nimport { files as api } from '@/api'\n\nexport default {\n  name: 'info',\n  computed: {\n    ...mapState(['req', 'selected']),\n    ...mapGetters(['selectedCount', 'isListing']),\n    humanSize: function () {\n      if (this.selectedCount === 0 || !this.isListing) {\n        return filesize(this.req.size)\n      }\n\n      let sum = 0\n\n      for (let selected of this.selected) {\n        sum += this.req.items[selected].size\n      }\n\n      return filesize(sum)\n    },\n    humanTime: function () {\n      if (this.selectedCount === 0) {\n        return moment(this.req.modified).fromNow()\n      }\n\n      return moment(this.req.items[this.selected[0]]).fromNow()\n    },\n    name: function () {\n      return this.selectedCount === 0 ? this.req.name : this.req.items[this.selected[0]].name\n    },\n    dir: function () {\n      return this.selectedCount > 1 || (this.selectedCount === 0\n        ? this.req.isDir\n        : this.req.items[this.selected[0]].isDir)\n    }\n  },\n  methods: {\n    checksum: async function (event, algo) {\n      event.preventDefault()\n\n      let link\n\n      if (this.selectedCount) {\n        link = this.req.items[this.selected[0]].url\n      } else {\n        link = this.$route.path\n      }\n\n      try {\n        const hash = await api.checksum(link, algo)\n        // eslint-disable-next-line\n        event.target.innerHTML = hash\n      } catch (e) {\n        this.$showError(e)\n      }\n    }\n  }\n}\n</script>\n"]}]}