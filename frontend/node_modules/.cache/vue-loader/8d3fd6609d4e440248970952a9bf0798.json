{"remainingRequest":"/home/lq/ifb/src/eshop/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/lq/ifb/src/eshop/frontend/src/components/prompts/Move.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/lq/ifb/src/eshop/frontend/src/components/prompts/Move.vue","mtime":1583132470976},{"path":"/home/lq/ifb/src/eshop/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/lq/ifb/src/eshop/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/lq/ifb/src/eshop/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/lq/ifb/src/eshop/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCcKaW1wb3J0IEZpbGVMaXN0IGZyb20gJy4vRmlsZUxpc3QnCmltcG9ydCB7IGZpbGVzIGFzIGFwaSB9IGZyb20gJ0AvYXBpJwppbXBvcnQgYnV0dG9ucyBmcm9tICdAL3V0aWxzL2J1dHRvbnMnCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ21vdmUnLAogIGNvbXBvbmVudHM6IHsgRmlsZUxpc3QgfSwKICBkYXRhOiBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gewogICAgICBjdXJyZW50OiB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUsCiAgICAgIGRlc3Q6IG51bGwKICAgIH0KICB9LAogIGNvbXB1dGVkOiBtYXBTdGF0ZShbJ3JlcScsICdzZWxlY3RlZCddKSwKICBtZXRob2RzOiB7CiAgICBtb3ZlOiBhc3luYyBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKQogICAgICBidXR0b25zLmxvYWRpbmcoJ21vdmUnKQogICAgICBsZXQgaXRlbXMgPSBbXQoKICAgICAgZm9yIChsZXQgaXRlbSBvZiB0aGlzLnNlbGVjdGVkKSB7CiAgICAgICAgaXRlbXMucHVzaCh7CiAgICAgICAgICBmcm9tOiB0aGlzLnJlcS5pdGVtc1tpdGVtXS51cmwsCiAgICAgICAgICB0bzogdGhpcy5kZXN0ICsgZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMucmVxLml0ZW1zW2l0ZW1dLm5hbWUpCiAgICAgICAgfSkKICAgICAgfQoKICAgICAgdHJ5IHsKICAgICAgICBhcGkubW92ZShpdGVtcykKICAgICAgICBidXR0b25zLnN1Y2Nlc3MoJ21vdmUnKQogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgcGF0aDogdGhpcy5kZXN0IH0pCiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBidXR0b25zLmRvbmUoJ21vdmUnKQogICAgICAgIHRoaXMuJHNob3dFcnJvcihlKQogICAgICB9CgogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["Move.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"Move.vue","sourceRoot":"src/components/prompts","sourcesContent":["<template>\n  <div class=\"card floating\">\n    <div class=\"card-title\">\n      <h2>{{ $t('prompts.move') }}</h2>\n    </div>\n\n    <div class=\"card-content\">\n      <file-list @update:selected=\"val => dest = val\"></file-list>\n    </div>\n\n    <div class=\"card-action\">\n      <button class=\"button button--flat button--grey\"\n        @click=\"$store.commit('closeHovers')\"\n        :aria-label=\"$t('buttons.cancel')\"\n        :title=\"$t('buttons.cancel')\">{{ $t('buttons.cancel') }}</button>\n      <button class=\"button button--flat\"\n        @click=\"move\"\n        :disabled=\"$route.path === dest\"\n        :aria-label=\"$t('buttons.move')\"\n        :title=\"$t('buttons.move')\">{{ $t('buttons.move') }}</button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nimport FileList from './FileList'\nimport { files as api } from '@/api'\nimport buttons from '@/utils/buttons'\n\nexport default {\n  name: 'move',\n  components: { FileList },\n  data: function () {\n    return {\n      current: window.location.pathname,\n      dest: null\n    }\n  },\n  computed: mapState(['req', 'selected']),\n  methods: {\n    move: async function (event) {\n      event.preventDefault()\n      buttons.loading('move')\n      let items = []\n\n      for (let item of this.selected) {\n        items.push({\n          from: this.req.items[item].url,\n          to: this.dest + encodeURIComponent(this.req.items[item].name)\n        })\n      }\n\n      try {\n        api.move(items)\n        buttons.success('move')\n        this.$router.push({ path: this.dest })\n      } catch (e) {\n        buttons.done('move')\n        this.$showError(e)\n      }\n\n      event.preventDefault()\n    }\n  }\n}\n</script>\n"]}]}