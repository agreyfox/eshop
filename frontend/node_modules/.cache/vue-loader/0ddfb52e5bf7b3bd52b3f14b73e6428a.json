{"remainingRequest":"/home/lq/ifb/src/eshop/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/lq/ifb/src/eshop/frontend/src/components/prompts/Copy.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/lq/ifb/src/eshop/frontend/src/components/prompts/Copy.vue","mtime":1583132470976},{"path":"/home/lq/ifb/src/eshop/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/lq/ifb/src/eshop/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/lq/ifb/src/eshop/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCcKaW1wb3J0IEZpbGVMaXN0IGZyb20gJy4vRmlsZUxpc3QnCmltcG9ydCB7IGZpbGVzIGFzIGFwaSB9IGZyb20gJ0AvYXBpJwppbXBvcnQgYnV0dG9ucyBmcm9tICdAL3V0aWxzL2J1dHRvbnMnCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ2NvcHknLAogIGNvbXBvbmVudHM6IHsgRmlsZUxpc3QgfSwKICBkYXRhOiBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gewogICAgICBjdXJyZW50OiB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUsCiAgICAgIGRlc3Q6IG51bGwKICAgIH0KICB9LAogIGNvbXB1dGVkOiBtYXBTdGF0ZShbJ3JlcScsICdzZWxlY3RlZCddKSwKICBtZXRob2RzOiB7CiAgICBjb3B5OiBhc3luYyBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKQogICAgICBidXR0b25zLmxvYWRpbmcoJ2NvcHknKQogICAgICBsZXQgaXRlbXMgPSBbXQoKICAgICAgLy8gQ3JlYXRlIGEgbmV3IHByb21pc2UgZm9yIGVhY2ggZmlsZS4KICAgICAgZm9yIChsZXQgaXRlbSBvZiB0aGlzLnNlbGVjdGVkKSB7CiAgICAgICAgaXRlbXMucHVzaCh7CiAgICAgICAgICBmcm9tOiB0aGlzLnJlcS5pdGVtc1tpdGVtXS51cmwsCiAgICAgICAgICB0bzogdGhpcy5kZXN0ICsgZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMucmVxLml0ZW1zW2l0ZW1dLm5hbWUpCiAgICAgICAgfSkKICAgICAgfQoKICAgICAgdHJ5IHsKICAgICAgICBhd2FpdCBhcGkuY29weShpdGVtcykKICAgICAgICBidXR0b25zLnN1Y2Nlc3MoJ2NvcHknKQogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgcGF0aDogdGhpcy5kZXN0IH0pCiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBidXR0b25zLmRvbmUoJ2NvcHknKQogICAgICAgIHRoaXMuJHNob3dFcnJvcihlKQogICAgICB9CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["Copy.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Copy.vue","sourceRoot":"src/components/prompts","sourcesContent":["<template>\n  <div class=\"card floating\">\n    <div class=\"card-title\">\n      <h2>{{ $t('prompts.copy') }}</h2>\n    </div>\n\n    <div class=\"card-content\">\n      <p>{{ $t('prompts.copyMessage') }}</p>\n      <file-list @update:selected=\"val => dest = val\"></file-list>\n    </div>\n\n    <div class=\"card-action\">\n      <button class=\"button button--flat button--grey\"\n        @click=\"$store.commit('closeHovers')\"\n        :aria-label=\"$t('buttons.cancel')\"\n        :title=\"$t('buttons.cancel')\">{{ $t('buttons.cancel') }}</button>\n      <button class=\"button button--flat\"\n        @click=\"copy\"\n        :disabled=\"$route.path === dest\"\n        :aria-label=\"$t('buttons.copy')\"\n        :title=\"$t('buttons.copy')\">{{ $t('buttons.copy') }}</button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nimport FileList from './FileList'\nimport { files as api } from '@/api'\nimport buttons from '@/utils/buttons'\n\nexport default {\n  name: 'copy',\n  components: { FileList },\n  data: function () {\n    return {\n      current: window.location.pathname,\n      dest: null\n    }\n  },\n  computed: mapState(['req', 'selected']),\n  methods: {\n    copy: async function (event) {\n      event.preventDefault()\n      buttons.loading('copy')\n      let items = []\n\n      // Create a new promise for each file.\n      for (let item of this.selected) {\n        items.push({\n          from: this.req.items[item].url,\n          to: this.dest + encodeURIComponent(this.req.items[item].name)\n        })\n      }\n\n      try {\n        await api.copy(items)\n        buttons.success('copy')\n        this.$router.push({ path: this.dest })\n      } catch (e) {\n        buttons.done('copy')\n        this.$showError(e)\n      }\n    }\n  }\n}\n</script>\n"]}]}