{"remainingRequest":"/home/lq/ifb/src/eshop/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/lq/ifb/src/eshop/frontend/src/components/prompts/NewFile.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/lq/ifb/src/eshop/frontend/src/components/prompts/NewFile.vue","mtime":1583132470976},{"path":"/home/lq/ifb/src/eshop/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/lq/ifb/src/eshop/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/lq/ifb/src/eshop/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/lq/ifb/src/eshop/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JwppbXBvcnQgeyBmaWxlcyBhcyBhcGkgfSBmcm9tICdAL2FwaScKaW1wb3J0IHVybCBmcm9tICdAL3V0aWxzL3VybCcKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnbmV3LWZpbGUnLAogIGRhdGE6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHsKICAgICAgbmFtZTogJycKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycyhbICdpc0ZpbGVzJywgJ2lzTGlzdGluZycgXSkKICB9LAogIG1ldGhvZHM6IHsKICAgIHN1Ym1pdDogYXN5bmMgZnVuY3Rpb24oZXZlbnQpIHsKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKQogICAgICBpZiAodGhpcy5uZXcgPT09ICcnKSByZXR1cm4KCiAgICAgIC8vIEJ1aWxkIHRoZSBwYXRoIG9mIHRoZSBuZXcgZGlyZWN0b3J5LgogICAgICBsZXQgdXJpID0gdGhpcy5pc0ZpbGVzID8gdGhpcy4kcm91dGUucGF0aCArICcvJyA6ICcvJwoKICAgICAgaWYgKCF0aGlzLmlzTGlzdGluZykgewogICAgICAgIHVyaSA9IHVybC5yZW1vdmVMYXN0RGlyKHVyaSkgKyAnLycKICAgICAgfQoKICAgICAgdXJpICs9IGVuY29kZVVSSUNvbXBvbmVudCh0aGlzLm5hbWUpCiAgICAgIHVyaSA9IHVyaS5yZXBsYWNlKCcvLycsICcvJykKCiAgICAgIHRyeSB7CiAgICAgICAgYXdhaXQgYXBpLnBvc3QodXJpKQogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgcGF0aDogdXJpIH0pCiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICB0aGlzLiRzaG93RXJyb3IoZSkKICAgICAgfQoKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdjbG9zZUhvdmVycycpCiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["NewFile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"NewFile.vue","sourceRoot":"src/components/prompts","sourcesContent":["<template>\n  <div class=\"card floating\">\n    <div class=\"card-title\">\n      <h2>{{ $t('prompts.newFile') }}</h2>\n    </div>\n\n    <div class=\"card-content\">\n      <p>{{ $t('prompts.newFileMessage') }}</p>\n      <input class=\"input input--block\" v-focus type=\"text\" @keyup.enter=\"submit\" v-model.trim=\"name\">\n    </div>\n\n    <div class=\"card-action\">\n      <button\n        class=\"button button--flat button--grey\"\n        @click=\"$store.commit('closeHovers')\"\n        :aria-label=\"$t('buttons.cancel')\"\n        :title=\"$t('buttons.cancel')\"\n      >{{ $t('buttons.cancel') }}</button>\n      <button\n        class=\"button button--flat\"\n        @click=\"submit\"\n        :aria-label=\"$t('buttons.create')\"\n        :title=\"$t('buttons.create')\"\n      >{{ $t('buttons.create') }}</button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nimport { files as api } from '@/api'\nimport url from '@/utils/url'\n\nexport default {\n  name: 'new-file',\n  data: function() {\n    return {\n      name: ''\n    };\n  },\n  computed: {\n    ...mapGetters([ 'isFiles', 'isListing' ])\n  },\n  methods: {\n    submit: async function(event) {\n      event.preventDefault()\n      if (this.new === '') return\n\n      // Build the path of the new directory.\n      let uri = this.isFiles ? this.$route.path + '/' : '/'\n\n      if (!this.isListing) {\n        uri = url.removeLastDir(uri) + '/'\n      }\n\n      uri += encodeURIComponent(this.name)\n      uri = uri.replace('//', '/')\n\n      try {\n        await api.post(uri)\n        this.$router.push({ path: uri })\n      } catch (e) {\n        this.$showError(e)\n      }\n\n      this.$store.commit('closeHovers')\n    }\n  }\n};\n</script>\n\n"]}]}