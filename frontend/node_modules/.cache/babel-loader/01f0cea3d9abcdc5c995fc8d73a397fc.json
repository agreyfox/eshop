{"remainingRequest":"/home/lq/ifb/src/eshop/frontend/node_modules/babel-loader/lib/index.js!/home/lq/ifb/src/eshop/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/lq/ifb/src/eshop/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/lq/ifb/src/eshop/frontend/src/views/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/lq/ifb/src/eshop/frontend/src/views/Login.vue","mtime":1585888182819},{"path":"/home/lq/ifb/src/eshop/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/lq/ifb/src/eshop/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/lq/ifb/src/eshop/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/lq/ifb/src/eshop/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL2hvbWUvbHEvaWZiL3NyYy9lc2hvcC9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCAqIGFzIGF1dGggZnJvbSAiQC91dGlscy9hdXRoIjsKaW1wb3J0IHsgbmFtZSBhcyBfbmFtZSwgbG9nb1VSTCBhcyBfbG9nb1VSTCwgc2lnbnVwIGFzIF9zaWdudXAgfSBmcm9tICJAL3V0aWxzL2NvbnN0YW50cyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAibG9naW4iLAogIGNvbXB1dGVkOiB7CiAgICBzaWdudXA6IGZ1bmN0aW9uIHNpZ251cCgpIHsKICAgICAgcmV0dXJuIF9zaWdudXA7CiAgICB9LAogICAgbmFtZTogZnVuY3Rpb24gbmFtZSgpIHsKICAgICAgcmV0dXJuIF9uYW1lOwogICAgfSwKICAgIGxvZ29VUkw6IGZ1bmN0aW9uIGxvZ29VUkwoKSB7CiAgICAgIHJldHVybiBfbG9nb1VSTDsKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjcmVhdGVNb2RlOiBmYWxzZSwKICAgICAgZXJyb3I6ICIiLAogICAgICB1c2VybmFtZTogIiIsCiAgICAgIHBhc3N3b3JkOiAiIiwKICAgICAgcGFzc3dvcmRDb25maXJtOiAiIgogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICAvLyAgaWYgKCFyZWNhcHRjaGEpIHJldHVybjsKICAgIGNvbnNvbGUubG9nKCJJIGFtIGhlcmUiKTsKICAgIC8qICB3aW5kb3cuZ3JlY2FwdGNoYS5yZW5kZXIoInJlY2FwdGNoYSIsIHsKICAgICAgc2l0ZWtleTogcmVjYXB0Y2hhS2V5CiAgICB9KTsgKi8KICB9LAogIG1ldGhvZHM6IHsKICAgIHN1Ym1pdDogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3N1Ym1pdCA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAvKiNfX1BVUkVfXyovCiAgICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoZXZlbnQpIHsKICAgICAgICB2YXIgcmVkaXJlY3Q7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgcmVkaXJlY3QgPSB0aGlzLiRyb3V0ZS5xdWVyeS5yZWRpcmVjdDsKCiAgICAgICAgICAgICAgICBpZiAocmVkaXJlY3QgPT09ICIiIHx8IHJlZGlyZWN0ID09PSB1bmRlZmluZWQgfHwgcmVkaXJlY3QgPT09IG51bGwpIHsKICAgICAgICAgICAgICAgICAgcmVkaXJlY3QgPSAiL3NldHRpbmdzLyI7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDQ7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgICAgIHJldHVybiBhdXRoLmxvZ2luKHRoaXMudXNlcm5hbWUsIHRoaXMucGFzc3dvcmQsIHRoaXMudXNlcm5hbWUpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICAgIHBhdGg6IHJlZGlyZWN0CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMzsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDEwOwogICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSg0KTsKCiAgICAgICAgICAgICAgICBpZiAoX2NvbnRleHQudDAubWVzc2FnZSA9PSA0MDkpIHsKICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvciA9IHRoaXMuJHQoImxvZ2luLnVzZXJuYW1lVGFrZW4iKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuZXJyb3IgPSB0aGlzLiR0KCJsb2dpbi53cm9uZ0NyZWRlbnRpYWxzIik7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCB0aGlzLCBbWzQsIDEwXV0pOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBzdWJtaXQoX3gpIHsKICAgICAgICByZXR1cm4gX3N1Ym1pdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gc3VibWl0OwogICAgfSgpCiAgfQp9Ow=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA,OAAA,KAAA,IAAA,MAAA,cAAA;AACA,SAAA,IAAA,IAAA,KAAA,EAAA,OAAA,IAAA,QAAA,EAAA,MAAA,IAAA,OAAA,QAAA,mBAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,OADA;AAEA,EAAA,QAAA,EAAA;AACA,IAAA,MAAA,EAAA;AAAA,aAAA,OAAA;AAAA,KADA;AAEA,IAAA,IAAA,EAAA;AAAA,aAAA,KAAA;AAAA,KAFA;AAGA,IAAA,OAAA,EAAA;AAAA,aAAA,QAAA;AAAA;AAHA,GAFA;AAOA,EAAA,IAAA,EAAA,gBAAA;AACA,WAAA;AACA,MAAA,UAAA,EAAA,KADA;AAEA,MAAA,KAAA,EAAA,EAFA;AAGA,MAAA,QAAA,EAAA,EAHA;AAIA,MAAA,QAAA,EAAA,EAJA;AAKA,MAAA,eAAA,EAAA;AALA,KAAA;AAOA,GAfA;AAgBA,EAAA,OAhBA,qBAgBA;AACA;AACA,IAAA,OAAA,CAAA,GAAA,CAAA,WAAA;AACA;;;AAGA,GAtBA;AAuBA,EAAA,OAAA,EAAA;AACA,IAAA,MADA;AAAA;AAAA;AAAA,+CACA,KADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,gBAAA,KAAA,CAAA,cAAA;AACA,gBAAA,KAAA,CAAA,eAAA;AAEA,gBAAA,QALA,GAKA,KAAA,MAAA,CAAA,KAAA,CAAA,QALA;;AAMA,oBAAA,QAAA,KAAA,EAAA,IAAA,QAAA,KAAA,SAAA,IAAA,QAAA,KAAA,IAAA,EAAA;AACA,kBAAA,QAAA,GAAA,YAAA;AACA;;AARA;AAAA;AAAA,uBAWA,IAAA,CAAA,KAAA,CAAA,KAAA,QAAA,EAAA,KAAA,QAAA,EAAA,KAAA,QAAA,CAXA;;AAAA;AAYA,qBAAA,OAAA,CAAA,IAAA,CAAA;AAAA,kBAAA,IAAA,EAAA;AAAA,iBAAA;AAZA;AAAA;;AAAA;AAAA;AAAA;;AAcA,oBAAA,YAAA,OAAA,IAAA,GAAA,EAAA;AACA,uBAAA,KAAA,GAAA,KAAA,EAAA,CAAA,qBAAA,CAAA;AACA,iBAFA,MAEA;AACA,uBAAA,KAAA,GAAA,KAAA,EAAA,CAAA,wBAAA,CAAA;AACA;;AAlBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAvBA,CAAA","sourcesContent":["<template>\n  <div id=\"login\">\n    <form @submit=\"submit\">\n      <img :src=\"logoURL\" alt=\"EShop Manager\" />\n      <h1>{{ name }}</h1>\n      <div v-if=\"error !== ''\" class=\"wrong\">{{ error }}</div>\n\n      <input\n        class=\"input input--block\"\n        type=\"text\"\n        v-model=\"username\"\n        :placeholder=\"$t('login.username')\"\n      />\n      <input\n        class=\"input input--block\"\n        type=\"password\"\n        v-model=\"password\"\n        :placeholder=\"$t('login.password')\"\n      />\n\n      <input class=\"button button--block\" type=\"submit\" :value=\"$t('login.submit')\" />\n    </form>\n  </div>\n</template>\n\n<script>\nimport * as auth from \"@/utils/auth\";\nimport { name, logoURL, signup } from \"@/utils/constants\";\n\nexport default {\n  name: \"login\",\n  computed: {\n    signup: () => signup,\n    name: () => name,\n    logoURL: () => logoURL\n  },\n  data: function() {\n    return {\n      createMode: false,\n      error: \"\",\n      username: \"\",\n      password: \"\",\n      passwordConfirm: \"\"\n    };\n  },\n  mounted() {\n    //  if (!recaptcha) return;\n    console.log(\"I am here\");\n    /*  window.grecaptcha.render(\"recaptcha\", {\n      sitekey: recaptchaKey\n    }); */\n  },\n  methods: {\n    async submit(event) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      let redirect = this.$route.query.redirect;\n      if (redirect === \"\" || redirect === undefined || redirect === null) {\n        redirect = \"/settings/\";\n      }\n\n      try {\n        await auth.login(this.username, this.password, this.username);\n        this.$router.push({ path: redirect });\n      } catch (e) {\n        if (e.message == 409) {\n          this.error = this.$t(\"login.usernameTaken\");\n        } else {\n          this.error = this.$t(\"login.wrongCredentials\");\n        }\n      }\n    }\n  }\n};\n</script>\n"],"sourceRoot":"src/views"}]}