{"remainingRequest":"/home/lq/ifb/src/eshop/frontend/node_modules/babel-loader/lib/index.js!/home/lq/ifb/src/eshop/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/lq/ifb/src/eshop/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/lq/ifb/src/eshop/frontend/src/components/files/Preview.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/lq/ifb/src/eshop/frontend/src/components/files/Preview.vue","mtime":1583132470976},{"path":"/home/lq/ifb/src/eshop/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/lq/ifb/src/eshop/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/lq/ifb/src/eshop/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/lq/ifb/src/eshop/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvcnMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvaG9tZS9scS9pZmIvc3JjL2VzaG9wL2Zyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICIvaG9tZS9scS9pZmIvc3JjL2VzaG9wL2Zyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9CgovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBtYXBTdGF0ZSB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgdXJsIGZyb20gJ0AvdXRpbHMvdXJsJzsKaW1wb3J0IHsgYmFzZVVSTCB9IGZyb20gJ0AvdXRpbHMvY29uc3RhbnRzJzsKaW1wb3J0IHsgZmlsZXMgYXMgYXBpIH0gZnJvbSAnQC9hcGknOwppbXBvcnQgSW5mb0J1dHRvbiBmcm9tICdAL2NvbXBvbmVudHMvYnV0dG9ucy9JbmZvJzsKaW1wb3J0IERlbGV0ZUJ1dHRvbiBmcm9tICdAL2NvbXBvbmVudHMvYnV0dG9ucy9EZWxldGUnOwppbXBvcnQgUmVuYW1lQnV0dG9uIGZyb20gJ0AvY29tcG9uZW50cy9idXR0b25zL1JlbmFtZSc7CmltcG9ydCBEb3dubG9hZEJ1dHRvbiBmcm9tICdAL2NvbXBvbmVudHMvYnV0dG9ucy9Eb3dubG9hZCc7CmltcG9ydCBFeHRlbmRlZEltYWdlIGZyb20gJy4vRXh0ZW5kZWRJbWFnZSc7CnZhciBtZWRpYVR5cGVzID0gWyJpbWFnZSIsICJ2aWRlbyIsICJhdWRpbyIsICJibG9iIl07CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAncHJldmlldycsCiAgY29tcG9uZW50czogewogICAgSW5mb0J1dHRvbjogSW5mb0J1dHRvbiwKICAgIERlbGV0ZUJ1dHRvbjogRGVsZXRlQnV0dG9uLAogICAgUmVuYW1lQnV0dG9uOiBSZW5hbWVCdXR0b24sCiAgICBEb3dubG9hZEJ1dHRvbjogRG93bmxvYWRCdXR0b24sCiAgICBFeHRlbmRlZEltYWdlOiBFeHRlbmRlZEltYWdlCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcHJldmlvdXNMaW5rOiAnJywKICAgICAgbmV4dExpbms6ICcnLAogICAgICBsaXN0aW5nOiBudWxsLAogICAgICBzdWJ0aXRsZXM6IFtdCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoe30sIG1hcFN0YXRlKFsncmVxJywgJ3VzZXInLCAnb2xkUmVxJywgJ2p3dCddKSwgewogICAgaGFzUHJldmlvdXM6IGZ1bmN0aW9uIGhhc1ByZXZpb3VzKCkgewogICAgICByZXR1cm4gdGhpcy5wcmV2aW91c0xpbmsgIT09ICcnOwogICAgfSwKICAgIGhhc05leHQ6IGZ1bmN0aW9uIGhhc05leHQoKSB7CiAgICAgIHJldHVybiB0aGlzLm5leHRMaW5rICE9PSAnJzsKICAgIH0sCiAgICBkb3dubG9hZDogZnVuY3Rpb24gZG93bmxvYWQoKSB7CiAgICAgIHJldHVybiAiIi5jb25jYXQoYmFzZVVSTCwgIi9hcGkvcmF3IikuY29uY2F0KHRoaXMucmVxLnBhdGgsICI/YXV0aD0iKS5jb25jYXQodGhpcy5qd3QpOwogICAgfSwKICAgIHJhdzogZnVuY3Rpb24gcmF3KCkgewogICAgICByZXR1cm4gIiIuY29uY2F0KHRoaXMuZG93bmxvYWQsICImaW5saW5lPXRydWUiKTsKICAgIH0KICB9KSwKICBtb3VudGVkOiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgX21vdW50ZWQgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgIC8qI19fUFVSRV9fKi8KICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgcGF0aCwgcmVzOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5rZXkpOwoKICAgICAgICAgICAgICBpZiAodGhpcy5yZXEuc3VidGl0bGVzKSB7CiAgICAgICAgICAgICAgICB0aGlzLnN1YnRpdGxlcyA9IHRoaXMucmVxLnN1YnRpdGxlcy5tYXAoZnVuY3Rpb24gKHN1YikgewogICAgICAgICAgICAgICAgICByZXR1cm4gIiIuY29uY2F0KGJhc2VVUkwsICIvYXBpL3JhdyIpLmNvbmNhdChzdWIsICI/YXV0aD0iKS5jb25jYXQoX3RoaXMuand0LCAiJmlubGluZT10cnVlIik7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAyOwoKICAgICAgICAgICAgICBpZiAoIXRoaXMub2xkUmVxLml0ZW1zKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgdGhpcy51cGRhdGVMaW5rcyh0aGlzLm9sZFJlcS5pdGVtcyk7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEyOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIHBhdGggPSB1cmwucmVtb3ZlTGFzdERpcih0aGlzLiRyb3V0ZS5wYXRoKTsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgcmV0dXJuIGFwaS5mZXRjaChwYXRoKTsKCiAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUxpbmtzKHJlcy5pdGVtcyk7CgogICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE0OwogICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMik7CiAgICAgICAgICAgICAgdGhpcy4kc2hvd0Vycm9yKF9jb250ZXh0LnQwKTsKCiAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUsIHRoaXMsIFtbMiwgMTRdXSk7CiAgICB9KSk7CgogICAgZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgICAgcmV0dXJuIF9tb3VudGVkLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9CgogICAgcmV0dXJuIG1vdW50ZWQ7CiAgfSgpLAogIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uIGJlZm9yZURlc3Ryb3koKSB7CiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLmtleSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBiYWNrOiBmdW5jdGlvbiBiYWNrKCkgewogICAgICB2YXIgdXJpID0gdXJsLnJlbW92ZUxhc3REaXIodGhpcy4kcm91dGUucGF0aCkgKyAnLyc7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBwYXRoOiB1cmkKICAgICAgfSk7CiAgICB9LAogICAgcHJldjogZnVuY3Rpb24gcHJldigpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6IHRoaXMucHJldmlvdXNMaW5rCiAgICAgIH0pOwogICAgfSwKICAgIG5leHQ6IGZ1bmN0aW9uIG5leHQoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBwYXRoOiB0aGlzLm5leHRMaW5rCiAgICAgIH0pOwogICAgfSwKICAgIGtleTogZnVuY3Rpb24ga2V5KGV2ZW50KSB7CiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgogICAgICBpZiAoZXZlbnQud2hpY2ggPT09IDEzIHx8IGV2ZW50LndoaWNoID09PSAzOSkgewogICAgICAgIC8vIHJpZ2h0IGFycm93CiAgICAgICAgaWYgKHRoaXMuaGFzTmV4dCkgdGhpcy5uZXh0KCk7CiAgICAgIH0gZWxzZSBpZiAoZXZlbnQud2hpY2ggPT09IDM3KSB7CiAgICAgICAgLy8gbGVmdCBhcnJvdwogICAgICAgIGlmICh0aGlzLmhhc1ByZXZpb3VzKSB0aGlzLnByZXYoKTsKICAgICAgfQogICAgfSwKICAgIHVwZGF0ZUxpbmtzOiBmdW5jdGlvbiB1cGRhdGVMaW5rcyhpdGVtcykgewogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKGl0ZW1zW2ldLm5hbWUgIT09IHRoaXMucmVxLm5hbWUpIHsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0KCiAgICAgICAgZm9yICh2YXIgaiA9IGkgLSAxOyBqID49IDA7IGotLSkgewogICAgICAgICAgaWYgKG1lZGlhVHlwZXMuaW5jbHVkZXMoaXRlbXNbal0udHlwZSkpIHsKICAgICAgICAgICAgdGhpcy5wcmV2aW91c0xpbmsgPSBpdGVtc1tqXS51cmw7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZm9yICh2YXIgX2ogPSBpICsgMTsgX2ogPCBpdGVtcy5sZW5ndGg7IF9qKyspIHsKICAgICAgICAgIGlmIChtZWRpYVR5cGVzLmluY2x1ZGVzKGl0ZW1zW19qXS50eXBlKSkgewogICAgICAgICAgICB0aGlzLm5leHRMaW5rID0gaXRlbXNbX2pdLnVybDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"sources":["Preview.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div id=\"previewer\">\n    <div class=\"bar\">\n      <button @click=\"back\" class=\"action\" :title=\"$t('files.closePreview')\" :aria-label=\"$t('files.closePreview')\" id=\"close\">\n        <i class=\"material-icons\">close</i>\n      </button>\n\n      <rename-button v-if=\"user.perm.rename\"></rename-button>\n      <delete-button v-if=\"user.perm.delete\"></delete-button>\n      <download-button v-if=\"user.perm.download\"></download-button>\n      <info-button></info-button>\n    </div>\n\n    <button class=\"action\" @click=\"prev\" v-show=\"hasPrevious\" :aria-label=\"$t('buttons.previous')\" :title=\"$t('buttons.previous')\">\n      <i class=\"material-icons\">chevron_left</i>\n    </button>\n    <button class=\"action\" @click=\"next\" v-show=\"hasNext\" :aria-label=\"$t('buttons.next')\" :title=\"$t('buttons.next')\">\n      <i class=\"material-icons\">chevron_right</i>\n    </button>\n\n    <div class=\"preview\">\n      <ExtendedImage v-if=\"req.type == 'image'\" :src=\"raw\"></ExtendedImage>\n      <audio v-else-if=\"req.type == 'audio'\" :src=\"raw\" autoplay controls></audio>\n      <video v-else-if=\"req.type == 'video'\" :src=\"raw\" autoplay controls>\n        <track\n          kind=\"captions\"\n          v-for=\"(sub, index) in subtitles\"\n          :key=\"index\"\n          :src=\"sub\"\n          :label=\"'Subtitle ' + index\" :default=\"index === 0\">\n        Sorry, your browser doesn't support embedded videos,\n        but don't worry, you can <a :href=\"download\">download it</a>\n        and watch it with your favorite video player!\n      </video>\n      <object v-else-if=\"req.extension == '.pdf'\" class=\"pdf\" :data=\"raw\"></object>\n      <a v-else-if=\"req.type == 'blob'\" :href=\"download\">\n        <h2 class=\"message\">{{ $t('buttons.download') }} <i class=\"material-icons\">file_download</i></h2>\n      </a>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nimport url from '@/utils/url'\nimport { baseURL } from '@/utils/constants'\nimport { files as api } from '@/api'\nimport InfoButton from '@/components/buttons/Info'\nimport DeleteButton from '@/components/buttons/Delete'\nimport RenameButton from '@/components/buttons/Rename'\nimport DownloadButton from '@/components/buttons/Download'\nimport ExtendedImage from './ExtendedImage'\n\nconst mediaTypes = [\n  \"image\",\n  \"video\",\n  \"audio\",\n  \"blob\"\n]\n\nexport default {\n  name: 'preview',\n  components: {\n    InfoButton,\n    DeleteButton,\n    RenameButton,\n    DownloadButton,\n    ExtendedImage\n  },\n  data: function () {\n    return {\n      previousLink: '',\n      nextLink: '',\n      listing: null,\n      subtitles: []\n    }\n  },\n  computed: {\n    ...mapState(['req', 'user', 'oldReq', 'jwt']),\n    hasPrevious () {\n      return (this.previousLink !== '')\n    },\n    hasNext () {\n      return (this.nextLink !== '')\n    },\n    download () {\n      return `${baseURL}/api/raw${this.req.path}?auth=${this.jwt}`\n    },\n    raw () {\n      return `${this.download}&inline=true`\n    }\n  },\n  async mounted () {\n    window.addEventListener('keyup', this.key)\n\n    if (this.req.subtitles) {\n      this.subtitles = this.req.subtitles.map(sub => `${baseURL}/api/raw${sub}?auth=${this.jwt}&inline=true`)\n    }\n\n    try {\n      if (this.oldReq.items) {\n        this.updateLinks(this.oldReq.items)\n      } else {\n        const path = url.removeLastDir(this.$route.path)\n        const res = await api.fetch(path)\n        this.updateLinks(res.items)\n      }\n    } catch (e) {\n      this.$showError(e)\n    }\n  },\n  beforeDestroy () {\n    window.removeEventListener('keyup', this.key)\n  },\n  methods: {\n    back () {\n      let uri = url.removeLastDir(this.$route.path) + '/'\n      this.$router.push({ path: uri })\n    },\n    prev () {\n      this.$router.push({ path: this.previousLink })\n    },\n    next () {\n      this.$router.push({ path: this.nextLink })\n    },\n    key (event) {\n      event.preventDefault()\n\n      if (event.which === 13 || event.which === 39) { // right arrow\n        if (this.hasNext) this.next()\n      } else if (event.which === 37) { // left arrow\n        if (this.hasPrevious) this.prev()\n      }\n    },\n    updateLinks (items) {\n      for (let i = 0; i < items.length; i++) {\n        if (items[i].name !== this.req.name) {\n          continue\n        }\n\n        for (let j = i - 1; j >= 0; j--) {\n          if (mediaTypes.includes(items[j].type)) {\n            this.previousLink = items[j].url\n            break\n          }\n        }\n\n        for (let j = i + 1; j < items.length; j++) {\n          if (mediaTypes.includes(items[j].type)) {\n            this.nextLink = items[j].url\n            break\n          }\n        }\n\n        return\n      }\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/components/files"}]}