{"remainingRequest":"/home/lq/ifb/src/eshop/frontend/node_modules/thread-loader/dist/cjs.js!/home/lq/ifb/src/eshop/frontend/node_modules/babel-loader/lib/index.js!/home/lq/ifb/src/eshop/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/lq/ifb/src/eshop/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/lq/ifb/src/eshop/frontend/src/views/Share.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/lq/ifb/src/eshop/frontend/src/views/Share.vue","mtime":1583132470984},{"path":"/home/lq/ifb/src/eshop/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/lq/ifb/src/eshop/frontend/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/lq/ifb/src/eshop/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/lq/ifb/src/eshop/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/lq/ifb/src/eshop/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5saW5rIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL2hvbWUvbHEvaWZiL3NyYy9lc2hvcC9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IHNoYXJlIGFzIGFwaSB9IGZyb20gJ0AvYXBpJzsKaW1wb3J0IHsgYmFzZVVSTCB9IGZyb20gJ0AvdXRpbHMvY29uc3RhbnRzJzsKaW1wb3J0IFFyY29kZVZ1ZSBmcm9tICdxcmNvZGUudnVlJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdzaGFyZScsCiAgY29tcG9uZW50czogewogICAgUXJjb2RlVnVlOiBRcmNvZGVWdWUKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsb2FkZWQ6IGZhbHNlLAogICAgICBub3RGb3VuZDogZmFsc2UsCiAgICAgIGZpbGU6IG51bGwKICAgIH07CiAgfSwKICB3YXRjaDogewogICAgJyRyb3V0ZSc6ICdmZXRjaERhdGEnCiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5mZXRjaERhdGEoKTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBoYXNoOiBmdW5jdGlvbiBoYXNoKCkgewogICAgICByZXR1cm4gdGhpcy4kcm91dGUucGFyYW1zLnBhdGhNYXRjaDsKICAgIH0sCiAgICBsaW5rOiBmdW5jdGlvbiBsaW5rKCkgewogICAgICByZXR1cm4gIiIuY29uY2F0KGJhc2VVUkwsICIvYXBpL3B1YmxpYy9kbC8iKS5jb25jYXQodGhpcy5oYXNoLCAiLyIpLmNvbmNhdChlbmNvZGVVUkkodGhpcy5maWxlLm5hbWUpKTsKICAgIH0sCiAgICBmdWxsTGluazogZnVuY3Rpb24gZnVsbExpbmsoKSB7CiAgICAgIHJldHVybiB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgdGhpcy5saW5rOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZmV0Y2hEYXRhOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZmV0Y2hEYXRhID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGFwaS5nZXRIYXNoKHRoaXMuaGFzaCk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHRoaXMuZmlsZSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICB0aGlzLmxvYWRlZCA9IHRydWU7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDc7CiAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDApOwogICAgICAgICAgICAgICAgdGhpcy5ub3RGb3VuZCA9IHRydWU7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCB0aGlzLCBbWzAsIDddXSk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGZldGNoRGF0YSgpIHsKICAgICAgICByZXR1cm4gX2ZldGNoRGF0YS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gZmV0Y2hEYXRhOwogICAgfSgpCiAgfQp9Ow=="},{"version":3,"sources":["Share.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwBA,SAAA,KAAA,IAAA,GAAA,QAAA,OAAA;AACA,SAAA,OAAA,QAAA,mBAAA;AACA,OAAA,SAAA,MAAA,YAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,OADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,SAAA,EAAA;AADA,GAFA;AAKA,EAAA,IAAA,EAAA;AAAA,WAAA;AACA,MAAA,MAAA,EAAA,KADA;AAEA,MAAA,QAAA,EAAA,KAFA;AAGA,MAAA,IAAA,EAAA;AAHA,KAAA;AAAA,GALA;AAUA,EAAA,KAAA,EAAA;AACA,cAAA;AADA,GAVA;AAaA,EAAA,OAAA,EAAA,mBAAA;AACA,SAAA,SAAA;AACA,GAfA;AAgBA,EAAA,QAAA,EAAA;AACA,IAAA,IAAA,EAAA,gBAAA;AACA,aAAA,KAAA,MAAA,CAAA,MAAA,CAAA,SAAA;AACA,KAHA;AAIA,IAAA,IAAA,EAAA,gBAAA;AACA,uBAAA,OAAA,4BAAA,KAAA,IAAA,cAAA,SAAA,CAAA,KAAA,IAAA,CAAA,IAAA,CAAA;AACA,KANA;AAOA,IAAA,QAAA,EAAA,oBAAA;AACA,aAAA,MAAA,CAAA,QAAA,CAAA,MAAA,GAAA,KAAA,IAAA;AACA;AATA,GAhBA;AA2BA,EAAA,OAAA,EAAA;AACA,IAAA,SAAA;AAAA;AAAA;AAAA,8BAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAEA,GAAA,CAAA,OAAA,CAAA,KAAA,IAAA,CAFA;;AAAA;AAEA,qBAAA,IAFA;AAGA,qBAAA,MAAA,GAAA,IAAA;AAHA;AAAA;;AAAA;AAAA;AAAA;AAKA,qBAAA,QAAA,GAAA,IAAA;;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AADA;AA3BA,CAAA","sourcesContent":["<template>\n  <div class=\"share\" v-if=\"loaded\">\n    <a target=\"_blank\" :href=\"link\">\n      <div class=\"share__box\">\n        <div class=\"share__box__download\" v-if=\"file.isDir\">{{ $t('download.downloadFolder') }}</div>\n        <div class=\"share__box__download\" v-else>{{ $t('download.downloadFile') }}</div>\n        <div class=\"share__box__info\">\n          <svg v-if=\"file.isDir\" fill=\"#40c4ff\" height=\"150\" viewBox=\"0 0 24 24\" width=\"150\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z\"/>\n            <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n          </svg>\n          <svg v-else fill=\"#40c4ff\" height=\"150\" viewBox=\"0 0 24 24\" width=\"150\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M6 2c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6H6zm7 7V3.5L18.5 9H13z\"/>\n            <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n          </svg>\n          <h1 class=\"share__box__title\">{{ file.name }}</h1>\n          <qrcode-vue :value=\"fullLink\" size=\"200\" level=\"M\"></qrcode-vue>\n        </div>\n      </div>\n    </a>\n  </div>\n</template>\n\n<script>\nimport { share as api } from '@/api'\nimport { baseURL } from '@/utils/constants'\nimport QrcodeVue from 'qrcode.vue'\n\nexport default {\n  name: 'share',\n  components: {\n    QrcodeVue\n  },\n  data: () => ({\n    loaded: false,\n    notFound: false,\n    file: null\n  }),\n  watch: {\n    '$route': 'fetchData'\n  },\n  created: function () {\n    this.fetchData()\n  },\n  computed: {\n    hash: function () {\n      return this.$route.params.pathMatch\n    },\n    link: function () {\n      return `${baseURL}/api/public/dl/${this.hash}/${encodeURI(this.file.name)}`\n    },\n    fullLink: function () {\n      return window.location.origin + this.link\n    },\n  },\n  methods: {\n    fetchData: async function () {\n      try {\n        this.file = await api.getHash(this.hash)\n        this.loaded = true\n      } catch (e) {\n        this.notFound = true\n      }\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/views"}]}