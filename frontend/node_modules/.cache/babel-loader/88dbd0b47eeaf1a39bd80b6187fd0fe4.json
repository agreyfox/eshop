{"remainingRequest":"/home/lq/ifb/src/eshop/frontend/node_modules/babel-loader/lib/index.js!/home/lq/ifb/src/eshop/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/lq/ifb/src/eshop/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/lq/ifb/src/eshop/frontend/src/views/Files.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/lq/ifb/src/eshop/frontend/src/views/Files.vue","mtime":1585887589858},{"path":"/home/lq/ifb/src/eshop/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/lq/ifb/src/eshop/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/lq/ifb/src/eshop/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/lq/ifb/src/eshop/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvcnMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5lbmRzLXdpdGgiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL2hvbWUvbHEvaWZiL3NyYy9lc2hvcC9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiL2hvbWUvbHEvaWZiL3NyYy9lc2hvcC9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkiOwoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IEZvcmJpZGRlbiBmcm9tICIuL2Vycm9ycy80MDMiOwppbXBvcnQgTm90Rm91bmQgZnJvbSAiLi9lcnJvcnMvNDA0IjsKaW1wb3J0IEludGVybmFsRXJyb3IgZnJvbSAiLi9lcnJvcnMvNTAwIjsKaW1wb3J0IFByZXZpZXcgZnJvbSAiQC9jb21wb25lbnRzL2ZpbGVzL1ByZXZpZXciOwppbXBvcnQgTGlzdGluZyBmcm9tICJAL2NvbXBvbmVudHMvZmlsZXMvTGlzdGluZyI7CmltcG9ydCB7IGZpbGVzIGFzIGFwaSB9IGZyb20gIkAvYXBpIjsKaW1wb3J0IHsgbWFwR2V0dGVycywgbWFwU3RhdGUsIG1hcE11dGF0aW9ucyB9IGZyb20gInZ1ZXgiOwoKZnVuY3Rpb24gY2xlYW4ocGF0aCkgewogIHJldHVybiBwYXRoLmVuZHNXaXRoKCIvIikgPyBwYXRoLnNsaWNlKDAsIC0xKSA6IHBhdGg7Cn0KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiZmlsZXMiLAogIGNvbXBvbmVudHM6IHsKICAgIEZvcmJpZGRlbjogRm9yYmlkZGVuLAogICAgTm90Rm91bmQ6IE5vdEZvdW5kLAogICAgSW50ZXJuYWxFcnJvcjogSW50ZXJuYWxFcnJvciwKICAgIFByZXZpZXc6IFByZXZpZXcsCiAgICBMaXN0aW5nOiBMaXN0aW5nLAogICAgRWRpdG9yOiBmdW5jdGlvbiBFZGl0b3IoKSB7CiAgICAgIHJldHVybiBpbXBvcnQoIkAvY29tcG9uZW50cy9maWxlcy9FZGl0b3IiKTsKICAgIH0KICB9LAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKHt9LCBtYXBHZXR0ZXJzKFsic2VsZWN0ZWRDb3VudCIsICJpc0xpc3RpbmciLCAiaXNFZGl0b3IiLCAiaXNGaWxlcyJdKSwge30sIG1hcFN0YXRlKFsicmVxIiwgInVzZXIiLCAicmVsb2FkIiwgIm11bHRpcGxlIiwgImxvYWRpbmciXSksIHsKICAgIGlzUHJldmlldzogZnVuY3Rpb24gaXNQcmV2aWV3KCkgewogICAgICByZXR1cm4gIXRoaXMubG9hZGluZyAmJiAhdGhpcy5pc0xpc3RpbmcgJiYgIXRoaXMuaXNFZGl0b3I7CiAgICB9LAogICAgYnJlYWRjcnVtYnM6IGZ1bmN0aW9uIGJyZWFkY3J1bWJzKCkgewogICAgICB2YXIgcGFydHMgPSB0aGlzLiRyb3V0ZS5wYXRoLnNwbGl0KCIvIik7CgogICAgICBpZiAocGFydHNbMF0gPT09ICIiKSB7CiAgICAgICAgcGFydHMuc2hpZnQoKTsKICAgICAgfQoKICAgICAgaWYgKHBhcnRzW3BhcnRzLmxlbmd0aCAtIDFdID09PSAiIikgewogICAgICAgIHBhcnRzLnBvcCgpOwogICAgICB9CgogICAgICB2YXIgYnJlYWRjcnVtYnMgPSBbXTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAoaSA9PT0gMCkgewogICAgICAgICAgYnJlYWRjcnVtYnMucHVzaCh7CiAgICAgICAgICAgIG5hbWU6IGRlY29kZVVSSUNvbXBvbmVudChwYXJ0c1tpXSksCiAgICAgICAgICAgIHVybDogIi8iICsgcGFydHNbaV0gKyAiLyIKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBicmVhZGNydW1icy5wdXNoKHsKICAgICAgICAgICAgbmFtZTogZGVjb2RlVVJJQ29tcG9uZW50KHBhcnRzW2ldKSwKICAgICAgICAgICAgdXJsOiBicmVhZGNydW1ic1tpIC0gMV0udXJsICsgcGFydHNbaV0gKyAiLyIKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQoKICAgICAgYnJlYWRjcnVtYnMuc2hpZnQoKTsKCiAgICAgIGlmIChicmVhZGNydW1icy5sZW5ndGggPiAzKSB7CiAgICAgICAgd2hpbGUgKGJyZWFkY3J1bWJzLmxlbmd0aCAhPT0gNCkgewogICAgICAgICAgYnJlYWRjcnVtYnMuc2hpZnQoKTsKICAgICAgICB9CgogICAgICAgIGJyZWFkY3J1bWJzWzBdLm5hbWUgPSAiLi4uIjsKICAgICAgfQoKICAgICAgcmV0dXJuIGJyZWFkY3J1bWJzOwogICAgfQogIH0pLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBlcnJvcjogbnVsbAogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmZldGNoRGF0YSgpOwogIH0sCiAgd2F0Y2g6IHsKICAgICRyb3V0ZTogImZldGNoRGF0YSIsCiAgICByZWxvYWQ6IGZ1bmN0aW9uIHJlbG9hZCgpIHsKICAgICAgdGhpcy5mZXRjaERhdGEoKTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICAvL3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5rZXlFdmVudCkKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLnNjcm9sbCk7CiAgfSwKICBiZWZvcmVEZXN0cm95OiBmdW5jdGlvbiBiZWZvcmVEZXN0cm95KCkgewogICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoImtleWRvd24iLCB0aGlzLmtleUV2ZW50KTsKICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJzY3JvbGwiLCB0aGlzLnNjcm9sbCk7CiAgfSwKICBkZXN0cm95ZWQ6IGZ1bmN0aW9uIGRlc3Ryb3llZCgpIHsKICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgidXBkYXRlUmVxdWVzdCIsIHt9KTsKICB9LAogIG1ldGhvZHM6IF9vYmplY3RTcHJlYWQoe30sIG1hcE11dGF0aW9ucyhbInNldExvYWRpbmciXSksIHsKICAgIGZldGNoRGF0YTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2ZldGNoRGF0YSA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAvKiNfX1BVUkVfXyovCiAgICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHVybCwgcmVzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIC8vIFJlc2V0IHZpZXcgaW5mb3JtYXRpb24uCiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoInNldFJlbG9hZCIsIGZhbHNlKTsKICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgicmVzZXRTZWxlY3RlZCIpOwogICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJtdWx0aXBsZSIsIGZhbHNlKTsKICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgiY2xvc2VIb3ZlcnMiKTsgLy8gU2V0IGxvYWRpbmcgdG8gdHJ1ZSBhbmQgcmVzZXQgdGhlIGVycm9yLgoKICAgICAgICAgICAgICAgIHRoaXMuc2V0TG9hZGluZyh0cnVlKTsKICAgICAgICAgICAgICAgIHRoaXMuZXJyb3IgPSBudWxsOwogICAgICAgICAgICAgICAgdXJsID0gdGhpcy4kcm91dGUucGF0aDsKICAgICAgICAgICAgICAgIGlmICh1cmwgPT09ICIiKSB1cmwgPSAiLyI7CiAgICAgICAgICAgICAgICBpZiAodXJsWzBdICE9PSAiLyIpIHVybCA9ICIvIiArIHVybDsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA5OwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgcmV0dXJuIGFwaS5mZXRjaCh1cmwpOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoIShjbGVhbihyZXMucGF0aCkgIT09IGNsZWFuKCIvIi5jb25jYXQodGhpcy4kcm91dGUucGFyYW1zLnBhdGhNYXRjaCkpKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJ1cGRhdGVSZXF1ZXN0IiwgcmVzKTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LnRpdGxlID0gcmVzLm5hbWU7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjI7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxOTsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oOSk7CiAgICAgICAgICAgICAgICB0aGlzLmVycm9yID0gX2NvbnRleHQudDA7CgogICAgICAgICAgICAgIGNhc2UgMjI6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMjI7CiAgICAgICAgICAgICAgICB0aGlzLnNldExvYWRpbmcoZmFsc2UpOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmZpbmlzaCgyMik7CgogICAgICAgICAgICAgIGNhc2UgMjU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCB0aGlzLCBbWzksIDE5LCAyMiwgMjVdXSk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGZldGNoRGF0YSgpIHsKICAgICAgICByZXR1cm4gX2ZldGNoRGF0YS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gZmV0Y2hEYXRhOwogICAgfSgpLAogICAga2V5RXZlbnQ6IGZ1bmN0aW9uIGtleUV2ZW50KGV2ZW50KSB7CiAgICAgIC8vIEVzYyEKICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IDI3KSB7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJjbG9zZUhvdmVycyIpOyAvLyBJZiB3ZSdyZSBvbiBhIGxpc3RpbmcsIHVuc2VsZWN0IGFsbAogICAgICAgIC8vIGZpbGVzIGFuZCBmb2xkZXJzLgoKICAgICAgICBpZiAodGhpcy5pc0xpc3RpbmcpIHsKICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgicmVzZXRTZWxlY3RlZCIpOwogICAgICAgIH0KICAgICAgfSAvLyBEZWwhCgoKICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IDQ2KSB7CiAgICAgICAgaWYgKHRoaXMuaXNFZGl0b3IgfHwgIXRoaXMuaXNGaWxlcyB8fCB0aGlzLmxvYWRpbmcgfHwgIXRoaXMudXNlci5wZXJtLmRlbGV0ZSB8fCB0aGlzLmlzTGlzdGluZyAmJiB0aGlzLnNlbGVjdGVkQ291bnQgPT09IDAgfHwgdGhpcy4kc3RvcmUuc3RhdGUuc2hvdyAhPSBudWxsKSByZXR1cm47CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJzaG93SG92ZXIiLCAiZGVsZXRlIik7CiAgICAgIH0gLy8gRjEhCgoKICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IDExMikgewogICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJzaG93SG92ZXIiLCAiaGVscCIpOwogICAgICB9IC8vIEYyIQoKCiAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSAxMTMpIHsKICAgICAgICBpZiAodGhpcy5pc0VkaXRvciB8fCAhdGhpcy5pc0ZpbGVzIHx8IHRoaXMubG9hZGluZyB8fCAhdGhpcy51c2VyLnBlcm0ucmVuYW1lIHx8IHRoaXMuaXNMaXN0aW5nICYmIHRoaXMuc2VsZWN0ZWRDb3VudCA9PT0gMCB8fCB0aGlzLmlzTGlzdGluZyAmJiB0aGlzLnNlbGVjdGVkQ291bnQgPiAxKSByZXR1cm47CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJzaG93SG92ZXIiLCAicmVuYW1lIik7CiAgICAgIH0gLy8gQ1RSTCArIFMKCgogICAgICBpZiAoZXZlbnQuY3RybEtleSB8fCBldmVudC5tZXRhS2V5KSB7CiAgICAgICAgaWYgKHRoaXMuaXNFZGl0b3IpIHJldHVybjsKCiAgICAgICAgaWYgKFN0cmluZy5mcm9tQ2hhckNvZGUoZXZlbnQud2hpY2gpLnRvTG93ZXJDYXNlKCkgPT09ICJzIikgewogICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKCiAgICAgICAgICBpZiAodGhpcy5yZXEua2luZCAhPT0gImVkaXRvciIpIHsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImRvd25sb2FkLWJ1dHRvbiIpLmNsaWNrKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgc2Nyb2xsOiBmdW5jdGlvbiBzY3JvbGwoKSB7CiAgICAgIGlmICh0aGlzLnJlcS5raW5kICE9PSAibGlzdGluZyIgfHwgdGhpcy4kc3RvcmUuc3RhdGUudXNlci52aWV3TW9kZSA9PT0gIm1vc2FpYyIpIHJldHVybjsKICAgICAgdmFyIHRvcCA9IDExMiAtIHdpbmRvdy5zY3JvbGxZOwoKICAgICAgaWYgKHRvcCA8IDY0KSB7CiAgICAgICAgdG9wID0gNjQ7CiAgICAgIH0KCiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNsaXN0aW5nLmxpc3QgLml0ZW0uaGVhZGVyIikuc3R5bGUudG9wID0gdG9wICsgInB4IjsKICAgIH0sCiAgICBvcGVuU2lkZWJhcjogZnVuY3Rpb24gb3BlblNpZGViYXIoKSB7CiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgic2hvd0hvdmVyIiwgInNpZGViYXIiKTsKICAgIH0sCiAgICBvcGVuU2VhcmNoOiBmdW5jdGlvbiBvcGVuU2VhcmNoKCkgewogICAgICB0aGlzLiRzdG9yZS5jb21taXQoInNob3dIb3ZlciIsICJzZWFyY2giKTsKICAgIH0KICB9KQp9Ow=="},{"version":3,"sources":["Files.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <div id=\"breadcrumbs\">\n      <router-link to=\"/files/\" :aria-label=\"$t('files.home')\" :title=\"$t('files.home')\">\n        <i class=\"material-icons\">home</i>\n      </router-link>\n\n      <span v-for=\"(link, index) in breadcrumbs\" :key=\"index\">\n        <span class=\"chevron\">\n          <i class=\"material-icons\">keyboard_arrow_right</i>\n        </span>\n        <router-link :to=\"link.url\">{{ link.name }}</router-link>\n      </span>\n    </div>\n    <div v-if=\"error\">\n      <not-found v-if=\"error.message === '404'\"></not-found>\n      <forbidden v-else-if=\"error.message === '403'\"></forbidden>\n      <internal-error v-else></internal-error>\n    </div>\n    <editor v-else-if=\"isEditor\"></editor>\n    <listing :class=\"{ multiple }\" v-else-if=\"isListing\"></listing>\n    <preview v-else-if=\"isPreview\"></preview>\n    <div v-else>\n      <h2 class=\"message\">\n        <span>{{ $t('files.loading') }}</span>\n      </h2>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Forbidden from \"./errors/403\";\nimport NotFound from \"./errors/404\";\nimport InternalError from \"./errors/500\";\nimport Preview from \"@/components/files/Preview\";\nimport Listing from \"@/components/files/Listing\";\nimport { files as api } from \"@/api\";\nimport { mapGetters, mapState, mapMutations } from \"vuex\";\n\nfunction clean(path) {\n  return path.endsWith(\"/\") ? path.slice(0, -1) : path;\n}\n\nexport default {\n  name: \"files\",\n  components: {\n    Forbidden,\n    NotFound,\n    InternalError,\n    Preview,\n    Listing,\n    Editor: () => import(\"@/components/files/Editor\")\n  },\n  computed: {\n    ...mapGetters([\"selectedCount\", \"isListing\", \"isEditor\", \"isFiles\"]),\n    ...mapState([\"req\", \"user\", \"reload\", \"multiple\", \"loading\"]),\n    isPreview() {\n      return !this.loading && !this.isListing && !this.isEditor;\n    },\n    breadcrumbs() {\n      let parts = this.$route.path.split(\"/\");\n\n      if (parts[0] === \"\") {\n        parts.shift();\n      }\n\n      if (parts[parts.length - 1] === \"\") {\n        parts.pop();\n      }\n\n      let breadcrumbs = [];\n\n      for (let i = 0; i < parts.length; i++) {\n        if (i === 0) {\n          breadcrumbs.push({\n            name: decodeURIComponent(parts[i]),\n            url: \"/\" + parts[i] + \"/\"\n          });\n        } else {\n          breadcrumbs.push({\n            name: decodeURIComponent(parts[i]),\n            url: breadcrumbs[i - 1].url + parts[i] + \"/\"\n          });\n        }\n      }\n\n      breadcrumbs.shift();\n\n      if (breadcrumbs.length > 3) {\n        while (breadcrumbs.length !== 4) {\n          breadcrumbs.shift();\n        }\n\n        breadcrumbs[0].name = \"...\";\n      }\n\n      return breadcrumbs;\n    }\n  },\n  data: function() {\n    return {\n      error: null\n    };\n  },\n  created() {\n    this.fetchData();\n  },\n  watch: {\n    $route: \"fetchData\",\n    reload: function() {\n      this.fetchData();\n    }\n  },\n  mounted() {\n    //window.addEventListener('keydown', this.keyEvent)\n    window.addEventListener('scroll', this.scroll)\n  },\n  beforeDestroy() {\n    window.removeEventListener(\"keydown\", this.keyEvent);\n    window.removeEventListener(\"scroll\", this.scroll);\n  },\n  destroyed() {\n    this.$store.commit(\"updateRequest\", {});\n  },\n  methods: {\n    ...mapMutations([\"setLoading\"]),\n    async fetchData() {\n      // Reset view information.\n      this.$store.commit(\"setReload\", false);\n      this.$store.commit(\"resetSelected\");\n      this.$store.commit(\"multiple\", false);\n      this.$store.commit(\"closeHovers\");\n\n      // Set loading to true and reset the error.\n      this.setLoading(true);\n      this.error = null;\n\n      let url = this.$route.path;\n      if (url === \"\") url = \"/\";\n      if (url[0] !== \"/\") url = \"/\" + url;\n\n      try {\n        const res = await api.fetch(url);\n\n        if (clean(res.path) !== clean(`/${this.$route.params.pathMatch}`)) {\n          return;\n        }\n\n        this.$store.commit(\"updateRequest\", res);\n        document.title = res.name;\n      } catch (e) {\n        this.error = e;\n      } finally {\n        this.setLoading(false);\n      }\n    },\n    keyEvent(event) {\n      // Esc!\n      if (event.keyCode === 27) {\n        this.$store.commit(\"closeHovers\");\n\n        // If we're on a listing, unselect all\n        // files and folders.\n        if (this.isListing) {\n          this.$store.commit(\"resetSelected\");\n        }\n      }\n\n      // Del!\n      if (event.keyCode === 46) {\n        if (\n          this.isEditor ||\n          !this.isFiles ||\n          this.loading ||\n          !this.user.perm.delete ||\n          (this.isListing && this.selectedCount === 0) ||\n          this.$store.state.show != null\n        )\n          return;\n\n        this.$store.commit(\"showHover\", \"delete\");\n      }\n\n      // F1!\n      if (event.keyCode === 112) {\n        event.preventDefault();\n        this.$store.commit(\"showHover\", \"help\");\n      }\n\n      // F2!\n      if (event.keyCode === 113) {\n        if (\n          this.isEditor ||\n          !this.isFiles ||\n          this.loading ||\n          !this.user.perm.rename ||\n          (this.isListing && this.selectedCount === 0) ||\n          (this.isListing && this.selectedCount > 1)\n        )\n          return;\n\n        this.$store.commit(\"showHover\", \"rename\");\n      }\n\n      // CTRL + S\n      if (event.ctrlKey || event.metaKey) {\n        if (this.isEditor) return;\n\n        if (String.fromCharCode(event.which).toLowerCase() === \"s\") {\n          event.preventDefault();\n\n          if (this.req.kind !== \"editor\") {\n            document.getElementById(\"download-button\").click();\n          }\n        }\n      }\n    },\n    scroll() {\n      if (\n        this.req.kind !== \"listing\" ||\n        this.$store.state.user.viewMode === \"mosaic\"\n      )\n        return;\n\n      let top = 112 - window.scrollY;\n\n      if (top < 64) {\n        top = 64;\n      }\n\n      document.querySelector(\"#listing.list .item.header\").style.top =\n        top + \"px\";\n    },\n    openSidebar() {\n      this.$store.commit(\"showHover\", \"sidebar\");\n    },\n    openSearch() {\n      this.$store.commit(\"showHover\", \"search\");\n    }\n  }\n};\n</script>\n"],"sourceRoot":"src/views"}]}