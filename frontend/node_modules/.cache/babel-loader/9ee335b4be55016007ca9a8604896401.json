{"remainingRequest":"/home/lq/ifb/src/eshop/frontend/node_modules/thread-loader/dist/cjs.js!/home/lq/ifb/src/eshop/frontend/node_modules/babel-loader/lib/index.js!/home/lq/ifb/src/eshop/frontend/node_modules/eslint-loader/index.js??ref--13-0!/home/lq/ifb/src/eshop/frontend/src/api/share.js","dependencies":[{"path":"/home/lq/ifb/src/eshop/frontend/src/api/share.js","mtime":1583132470972},{"path":"/home/lq/ifb/src/eshop/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/lq/ifb/src/eshop/frontend/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/lq/ifb/src/eshop/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/lq/ifb/src/eshop/frontend/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL2hvbWUvbHEvaWZiL3NyYy9lc2hvcC9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCB7IGZldGNoVVJMLCBmZXRjaEpTT04sIHJlbW92ZVByZWZpeCB9IGZyb20gJy4vdXRpbHMnOwpleHBvcnQgZnVuY3Rpb24gZ2V0SGFzaChfeCkgewogIHJldHVybiBfZ2V0SGFzaC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBfZ2V0SGFzaCgpIHsKICBfZ2V0SGFzaCA9IF9hc3luY1RvR2VuZXJhdG9yKAogIC8qI19fUFVSRV9fKi8KICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKGhhc2gpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgZmV0Y2hKU09OKCIvYXBpL3B1YmxpYy9zaGFyZS8iLmNvbmNhdChoYXNoKSkpOwoKICAgICAgICAgIGNhc2UgMToKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlKTsKICB9KSk7CiAgcmV0dXJuIF9nZXRIYXNoLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBnZXQoX3gyKSB7CiAgcmV0dXJuIF9nZXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gX2dldCgpIHsKICBfZ2V0ID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgLyojX19QVVJFX18qLwogIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKHVybCkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgdXJsID0gcmVtb3ZlUHJlZml4KHVybCk7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBmZXRjaEpTT04oIi9hcGkvc2hhcmUiLmNvbmNhdCh1cmwpKSk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMik7CiAgfSkpOwogIHJldHVybiBfZ2V0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmV4cG9ydCBmdW5jdGlvbiByZW1vdmUoX3gzKSB7CiAgcmV0dXJuIF9yZW1vdmUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gX3JlbW92ZSgpIHsKICBfcmVtb3ZlID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgLyojX19QVVJFX18qLwogIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKGhhc2gpIHsKICAgIHZhciByZXM7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI7CiAgICAgICAgICAgIHJldHVybiBmZXRjaFVSTCgiL2FwaS9zaGFyZS8iLmNvbmNhdChoYXNoKSwgewogICAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScKICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICByZXMgPSBfY29udGV4dDMuc2VudDsKCiAgICAgICAgICAgIGlmICghKHJlcy5zdGF0dXMgIT09IDIwMCkpIHsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihyZXMuc3RhdHVzKTsKCiAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUzKTsKICB9KSk7CiAgcmV0dXJuIF9yZW1vdmUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZShfeDQpIHsKICByZXR1cm4gX2NyZWF0ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBfY3JlYXRlKCkgewogIF9jcmVhdGUgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQodXJsKSB7CiAgICB2YXIgZXhwaXJlcywKICAgICAgICB1bml0LAogICAgICAgIF9hcmdzNCA9IGFyZ3VtZW50czsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGV4cGlyZXMgPSBfYXJnczQubGVuZ3RoID4gMSAmJiBfYXJnczRbMV0gIT09IHVuZGVmaW5lZCA/IF9hcmdzNFsxXSA6ICcnOwogICAgICAgICAgICB1bml0ID0gX2FyZ3M0Lmxlbmd0aCA+IDIgJiYgX2FyZ3M0WzJdICE9PSB1bmRlZmluZWQgPyBfYXJnczRbMl0gOiAnaG91cnMnOwogICAgICAgICAgICB1cmwgPSByZW1vdmVQcmVmaXgodXJsKTsKICAgICAgICAgICAgdXJsID0gIi9hcGkvc2hhcmUiLmNvbmNhdCh1cmwpOwoKICAgICAgICAgICAgaWYgKGV4cGlyZXMgIT09ICcnKSB7CiAgICAgICAgICAgICAgdXJsICs9ICI/ZXhwaXJlcz0iLmNvbmNhdChleHBpcmVzLCAiJnVuaXQ9IikuY29uY2F0KHVuaXQpOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgZmV0Y2hKU09OKHVybCwgewogICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnCiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWU0KTsKICB9KSk7CiAgcmV0dXJuIF9jcmVhdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQ=="},{"version":3,"sources":["/home/lq/ifb/src/eshop/frontend/src/api/share.js"],"names":["fetchURL","fetchJSON","removePrefix","getHash","hash","get","url","remove","method","res","status","Error","create","expires","unit"],"mappings":";;;AAAA,SAASA,QAAT,EAAmBC,SAAnB,EAA8BC,YAA9B,QAAkD,SAAlD;AAEA,gBAAsBC,OAAtB;AAAA;AAAA;;;;;0BAAO,iBAAuBC,IAAvB;AAAA;AAAA;AAAA;AAAA;AAAA,6CACEH,SAAS,6BAAsBG,IAAtB,EADX;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAIP,gBAAsBC,GAAtB;AAAA;AAAA;;;;;0BAAO,kBAAmBC,GAAnB;AAAA;AAAA;AAAA;AAAA;AACLA,YAAAA,GAAG,GAAGJ,YAAY,CAACI,GAAD,CAAlB;AADK,8CAEEL,SAAS,qBAAcK,GAAd,EAFX;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAKP,gBAAsBC,MAAtB;AAAA;AAAA;;;;;0BAAO,kBAAsBH,IAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACaJ,QAAQ,sBAAeI,IAAf,GAAuB;AAC/CI,cAAAA,MAAM,EAAE;AADuC,aAAvB,CADrB;;AAAA;AACCC,YAAAA,GADD;;AAAA,kBAKDA,GAAG,CAACC,MAAJ,KAAe,GALd;AAAA;AAAA;AAAA;;AAAA,kBAMG,IAAIC,KAAJ,CAAUF,GAAG,CAACC,MAAd,CANH;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAUP,gBAAsBE,MAAtB;AAAA;AAAA;;;;;0BAAO,kBAAsBN,GAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2BO,YAAAA,OAA3B,8DAAqC,EAArC;AAAyCC,YAAAA,IAAzC,8DAAgD,OAAhD;AACLR,YAAAA,GAAG,GAAGJ,YAAY,CAACI,GAAD,CAAlB;AACAA,YAAAA,GAAG,uBAAgBA,GAAhB,CAAH;;AACA,gBAAIO,OAAO,KAAK,EAAhB,EAAoB;AAClBP,cAAAA,GAAG,uBAAgBO,OAAhB,mBAAgCC,IAAhC,CAAH;AACD;;AALI,8CAOEb,SAAS,CAACK,GAAD,EAAM;AACpBE,cAAAA,MAAM,EAAE;AADY,aAAN,CAPX;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["import { fetchURL, fetchJSON, removePrefix } from './utils'\n\nexport async function getHash(hash) {\n  return fetchJSON(`/api/public/share/${hash}`)\n}\n\nexport async function get(url) {\n  url = removePrefix(url)\n  return fetchJSON(`/api/share${url}`)\n}\n\nexport async function remove(hash) {\n  const res = await fetchURL(`/api/share/${hash}`, {\n    method: 'DELETE'\n  })\n\n  if (res.status !== 200) {\n    throw new Error(res.status)\n  }\n}\n\nexport async function create(url, expires = '', unit = 'hours') {\n  url = removePrefix(url)\n  url = `/api/share${url}`\n  if (expires !== '') {\n    url += `?expires=${expires}&unit=${unit}`\n  }\n\n  return fetchJSON(url, {\n    method: 'POST'\n  })\n}\n"]}]}