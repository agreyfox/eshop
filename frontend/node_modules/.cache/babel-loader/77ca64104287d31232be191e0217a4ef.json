{"remainingRequest":"/home/lq/ifb/src/eshop/frontend/node_modules/babel-loader/lib/index.js!/home/lq/ifb/src/eshop/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/lq/ifb/src/eshop/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/lq/ifb/src/eshop/frontend/src/components/prompts/Share.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/lq/ifb/src/eshop/frontend/src/components/prompts/Share.vue","mtime":1583132470976},{"path":"/home/lq/ifb/src/eshop/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/lq/ifb/src/eshop/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/lq/ifb/src/eshop/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/lq/ifb/src/eshop/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLml0ZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zb3J0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZGF0ZS50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvcnMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL2xxL2lmYi9zcmMvZXNob3AvZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIi9ob21lL2xxL2lmYi9zcmMvZXNob3AvZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IG1hcFN0YXRlLCBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IHNoYXJlIGFzIGFwaSB9IGZyb20gJ0AvYXBpJzsKaW1wb3J0IHsgYmFzZVVSTCB9IGZyb20gJ0AvdXRpbHMvY29uc3RhbnRzJzsKaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnOwppbXBvcnQgQ2xpcGJvYXJkIGZyb20gJ2NsaXBib2FyZCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnc2hhcmUnLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0aW1lOiAnJywKICAgICAgdW5pdDogJ2hvdXJzJywKICAgICAgaGFzUGVybWFuZW50OiBmYWxzZSwKICAgICAgbGlua3M6IFtdLAogICAgICBjbGlwOiBudWxsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoe30sIG1hcFN0YXRlKFsncmVxJywgJ3NlbGVjdGVkJywgJ3NlbGVjdGVkQ291bnQnXSksIHt9LCBtYXBHZXR0ZXJzKFsnaXNMaXN0aW5nJ10pLCB7CiAgICB1cmw6IGZ1bmN0aW9uIHVybCgpIHsKICAgICAgaWYgKCF0aGlzLmlzTGlzdGluZykgewogICAgICAgIHJldHVybiB0aGlzLiRyb3V0ZS5wYXRoOwogICAgICB9CgogICAgICBpZiAodGhpcy5zZWxlY3RlZENvdW50ID09PSAwIHx8IHRoaXMuc2VsZWN0ZWRDb3VudCA+IDEpIHsKICAgICAgICAvLyBUaGlzIHNob3VsZG4ndCBoYXBwZW4uCiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5yZXEuaXRlbXNbdGhpcy5zZWxlY3RlZFswXV0udXJsOwogICAgfQogIH0pLAogIGJlZm9yZU1vdW50OiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgX2JlZm9yZU1vdW50ID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAvKiNfX1BVUkVfXyovCiAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgbGlua3MsIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24sIF9kaWRJdGVyYXRvckVycm9yLCBfaXRlcmF0b3JFcnJvciwgX2l0ZXJhdG9yLCBfc3RlcCwgbGluazsKCiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMDsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gYXBpLmdldCh0aGlzLnVybCk7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgbGlua3MgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIHRoaXMubGlua3MgPSBsaW5rczsKICAgICAgICAgICAgICB0aGlzLnNvcnQoKTsKICAgICAgICAgICAgICBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZTsKICAgICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvciA9IGZhbHNlOwogICAgICAgICAgICAgIF9pdGVyYXRvckVycm9yID0gdW5kZWZpbmVkOwogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA5OwogICAgICAgICAgICAgIF9pdGVyYXRvciA9IHRoaXMubGlua3NbU3ltYm9sLml0ZXJhdG9yXSgpOwoKICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBpZiAoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IChfc3RlcCA9IF9pdGVyYXRvci5uZXh0KCkpLmRvbmUpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxOTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgbGluayA9IF9zdGVwLnZhbHVlOwoKICAgICAgICAgICAgICBpZiAoIShsaW5rLmV4cGlyZSA9PT0gMCkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgdGhpcy5oYXNQZXJtYW5lbnQgPSB0cnVlOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoImJyZWFrIiwgMTkpOwoKICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZTsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyNTsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDIxOwogICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oOSk7CiAgICAgICAgICAgICAgX2RpZEl0ZXJhdG9yRXJyb3IgPSB0cnVlOwogICAgICAgICAgICAgIF9pdGVyYXRvckVycm9yID0gX2NvbnRleHQudDA7CgogICAgICAgICAgICBjYXNlIDI1OgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAyNTsKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMjY7CgogICAgICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiAmJiBfaXRlcmF0b3IucmV0dXJuICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIF9pdGVyYXRvci5yZXR1cm4oKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICBjYXNlIDI4OgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAyODsKCiAgICAgICAgICAgICAgaWYgKCFfZGlkSXRlcmF0b3JFcnJvcikgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDMxOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjsKCiAgICAgICAgICAgIGNhc2UgMzE6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmZpbmlzaCgyOCk7CgogICAgICAgICAgICBjYXNlIDMyOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5maW5pc2goMjUpOwoKICAgICAgICAgICAgY2FzZSAzMzoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzg7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDM1OgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAzNTsKICAgICAgICAgICAgICBfY29udGV4dC50MSA9IF9jb250ZXh0WyJjYXRjaCJdKDApOwogICAgICAgICAgICAgIHRoaXMuJHNob3dFcnJvcihfY29udGV4dC50MSk7CgogICAgICAgICAgICBjYXNlIDM4OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlLCB0aGlzLCBbWzAsIDM1XSwgWzksIDIxLCAyNSwgMzNdLCBbMjYsLCAyOCwgMzJdXSk7CiAgICB9KSk7CgogICAgZnVuY3Rpb24gYmVmb3JlTW91bnQoKSB7CiAgICAgIHJldHVybiBfYmVmb3JlTW91bnQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KCiAgICByZXR1cm4gYmVmb3JlTW91bnQ7CiAgfSgpLAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHRoaXMuY2xpcCA9IG5ldyBDbGlwYm9hcmQoJy5jb3B5LWNsaXBib2FyZCcpOwogICAgdGhpcy5jbGlwLm9uKCdzdWNjZXNzJywgZnVuY3Rpb24gKCkgewogICAgICBfdGhpcy4kc2hvd1N1Y2Nlc3MoX3RoaXMuJHQoJ3N1Y2Nlc3MubGlua0NvcGllZCcpKTsKICAgIH0pOwogIH0sCiAgYmVmb3JlRGVzdHJveTogZnVuY3Rpb24gYmVmb3JlRGVzdHJveSgpIHsKICAgIHRoaXMuY2xpcC5kZXN0cm95KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBzdWJtaXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9zdWJtaXQgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgLyojX19QVVJFX18qLwogICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgcmVzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAodGhpcy50aW1lKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDI7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gYXBpLmNyZWF0ZSh0aGlzLnVybCwgdGhpcy50aW1lLCB0aGlzLnVuaXQpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIHRoaXMubGlua3MucHVzaChyZXMpOwogICAgICAgICAgICAgICAgdGhpcy5zb3J0KCk7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDEwOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLnQwID0gX2NvbnRleHQyWyJjYXRjaCJdKDIpOwogICAgICAgICAgICAgICAgdGhpcy4kc2hvd0Vycm9yKF9jb250ZXh0Mi50MCk7CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIsIHRoaXMsIFtbMiwgMTBdXSk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHN1Ym1pdCgpIHsKICAgICAgICByZXR1cm4gX3N1Ym1pdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gc3VibWl0OwogICAgfSgpLAogICAgZ2V0UGVybWFsaW5rOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZ2V0UGVybWFsaW5rID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgdmFyIHJlczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSAwOwogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGFwaS5jcmVhdGUodGhpcy51cmwpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICAgIHRoaXMubGlua3MucHVzaChyZXMpOwogICAgICAgICAgICAgICAgdGhpcy5zb3J0KCk7CiAgICAgICAgICAgICAgICB0aGlzLmhhc1Blcm1hbmVudCA9IHRydWU7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gOTsKICAgICAgICAgICAgICAgIF9jb250ZXh0My50MCA9IF9jb250ZXh0M1siY2F0Y2giXSgwKTsKICAgICAgICAgICAgICAgIHRoaXMuJHNob3dFcnJvcihfY29udGV4dDMudDApOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzLCB0aGlzLCBbWzAsIDldXSk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGdldFBlcm1hbGluaygpIHsKICAgICAgICByZXR1cm4gX2dldFBlcm1hbGluay5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gZ2V0UGVybWFsaW5rOwogICAgfSgpLAogICAgZGVsZXRlTGluazogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2RlbGV0ZUxpbmsgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgLyojX19QVVJFX18qLwogICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNChldmVudCwgbGluaykgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgX2NvbnRleHQ0LnByZXYgPSAxOwogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIGFwaS5yZW1vdmUobGluay5oYXNoKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgaWYgKGxpbmsuZXhwaXJlID09PSAwKSB0aGlzLmhhc1Blcm1hbmVudCA9IGZhbHNlOwogICAgICAgICAgICAgICAgdGhpcy5saW5rcyA9IHRoaXMubGlua3MuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmhhc2ggIT09IGxpbmsuaGFzaDsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxMTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICBfY29udGV4dDQucHJldiA9IDg7CiAgICAgICAgICAgICAgICBfY29udGV4dDQudDAgPSBfY29udGV4dDRbImNhdGNoIl0oMSk7CiAgICAgICAgICAgICAgICB0aGlzLiRzaG93RXJyb3IoX2NvbnRleHQ0LnQwKTsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNCwgdGhpcywgW1sxLCA4XV0pOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBkZWxldGVMaW5rKF94LCBfeDIpIHsKICAgICAgICByZXR1cm4gX2RlbGV0ZUxpbmsuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGRlbGV0ZUxpbms7CiAgICB9KCksCiAgICBodW1hblRpbWU6IGZ1bmN0aW9uIGh1bWFuVGltZSh0aW1lKSB7CiAgICAgIHJldHVybiBtb21lbnQodGltZSAqIDEwMDApLmZyb21Ob3coKTsKICAgIH0sCiAgICBidWlsZExpbms6IGZ1bmN0aW9uIGJ1aWxkTGluayhoYXNoKSB7CiAgICAgIHJldHVybiAiIi5jb25jYXQod2luZG93LmxvY2F0aW9uLm9yaWdpbikuY29uY2F0KGJhc2VVUkwsICIvc2hhcmUvIikuY29uY2F0KGhhc2gpOwogICAgfSwKICAgIHNvcnQ6IGZ1bmN0aW9uIHNvcnQoKSB7CiAgICAgIHRoaXMubGlua3MgPSB0aGlzLmxpbmtzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICBpZiAoYS5leHBpcmUgPT09IDApIHJldHVybiAtMTsKICAgICAgICBpZiAoYi5leHBpcmUgPT09IDApIHJldHVybiAxOwogICAgICAgIHJldHVybiBuZXcgRGF0ZShhLmV4cGlyZSkgLSBuZXcgRGF0ZShiLmV4cGlyZSk7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["Share.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"card floating\" id=\"share\">\n    <div class=\"card-title\">\n      <h2>{{ $t('buttons.share') }}</h2>\n    </div>\n\n    <div class=\"card-content\">\n      <ul>\n        <li v-if=\"!hasPermanent\">\n          <a @click=\"getPermalink\" :aria-label=\"$t('buttons.permalink')\">{{ $t('buttons.permalink') }}</a>\n        </li>\n\n        <li v-for=\"link in links\" :key=\"link.hash\">\n          <a :href=\"buildLink(link.hash)\" target=\"_blank\">\n            <template v-if=\"link.expire !== 0\">{{ humanTime(link.expire) }}</template>\n            <template v-else>{{ $t('permanent') }}</template>\n          </a>\n\n          <button class=\"action\"\n            @click=\"deleteLink($event, link)\"\n            :aria-label=\"$t('buttons.delete')\"\n            :title=\"$t('buttons.delete')\"><i class=\"material-icons\">delete</i></button>\n\n          <button class=\"action copy-clipboard\"\n            :data-clipboard-text=\"buildLink(link.hash)\"\n            :aria-label=\"$t('buttons.copyToClipboard')\"\n            :title=\"$t('buttons.copyToClipboard')\"><i class=\"material-icons\">content_paste</i></button>\n        </li>\n\n        <li>\n          <input v-focus\n            type=\"number\"\n            max=\"2147483647\"\n            min=\"0\"\n            @keyup.enter=\"submit\"\n            v-model.trim=\"time\">\n          <select v-model=\"unit\" :aria-label=\"$t('time.unit')\">\n            <option value=\"seconds\">{{ $t('time.seconds') }}</option>\n            <option value=\"minutes\">{{ $t('time.minutes') }}</option>\n            <option value=\"hours\">{{ $t('time.hours') }}</option>\n            <option value=\"days\">{{ $t('time.days') }}</option>\n          </select>\n          <button class=\"action\"\n            @click=\"submit\"\n            :aria-label=\"$t('buttons.create')\"\n            :title=\"$t('buttons.create')\"><i class=\"material-icons\">add</i></button>\n        </li>\n      </ul>\n    </div>\n\n    <div class=\"card-action\">\n      <button class=\"button button--flat\"\n        @click=\"$store.commit('closeHovers')\"\n        :aria-label=\"$t('buttons.close')\"\n        :title=\"$t('buttons.close')\">{{ $t('buttons.close') }}</button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState, mapGetters } from 'vuex'\nimport { share as api } from '@/api'\nimport { baseURL } from '@/utils/constants'\nimport moment from 'moment'\nimport Clipboard from 'clipboard'\n\nexport default {\n  name: 'share',\n  data: function () {\n    return {\n      time: '',\n      unit: 'hours',\n      hasPermanent: false,\n      links: [],\n      clip: null\n    }\n  },\n  computed: {\n    ...mapState([ 'req', 'selected', 'selectedCount' ]),\n    ...mapGetters([ 'isListing' ]),\n    url () {\n      if (!this.isListing) {\n        return this.$route.path\n      }\n\n      if (this.selectedCount === 0 || this.selectedCount > 1) {\n        // This shouldn't happen.\n        return\n      }\n\n      return this.req.items[this.selected[0]].url\n    }\n  },\n  async beforeMount () {\n    try {\n      const links = await api.get(this.url)\n      this.links = links\n      this.sort()\n\n      for (let link of this.links) {\n        if (link.expire === 0) {\n          this.hasPermanent = true\n          break\n        }\n      }\n    } catch (e) {\n      this.$showError(e)\n    }\n  },\n  mounted () {\n    this.clip = new Clipboard('.copy-clipboard')\n    this.clip.on('success', () => {\n      this.$showSuccess(this.$t('success.linkCopied'))\n    })\n  },\n  beforeDestroy () {\n    this.clip.destroy()\n  },\n  methods: {\n    submit: async function () {\n      if (!this.time) return\n\n      try {\n        const res = await api.create(this.url, this.time, this.unit)\n        this.links.push(res)\n        this.sort()\n      } catch (e) {\n        this.$showError(e)\n      }\n    },\n    getPermalink: async function () {\n      try {\n        const res = await api.create(this.url)\n        this.links.push(res)\n        this.sort()\n        this.hasPermanent = true\n      } catch (e) {\n        this.$showError(e)\n      }\n    },\n    deleteLink: async function (event, link) {\n      event.preventDefault()\n       try {\n        await api.remove(link.hash)\n        if (link.expire === 0) this.hasPermanent = false\n        this.links = this.links.filter(item => item.hash !== link.hash)\n      } catch (e) {\n        this.$showError(e)\n      }\n    },\n    humanTime (time) {\n      return moment(time * 1000).fromNow()\n    },\n    buildLink (hash) {\n      return `${window.location.origin}${baseURL}/share/${hash}`\n    },\n    sort () {\n      this.links = this.links.sort((a, b) => {\n        if (a.expire === 0) return -1\n        if (b.expire === 0) return 1\n        return new Date(a.expire) - new Date(b.expire)\n      })\n    }\n  }\n}\n</script>\n\n"],"sourceRoot":"src/components/prompts"}]}