{"remainingRequest":"/home/lq/ifb/src/eshop/frontend/node_modules/babel-loader/lib/index.js!/home/lq/ifb/src/eshop/frontend/node_modules/eslint-loader/index.js??ref--13-0!/home/lq/ifb/src/eshop/frontend/src/api/commands.js","dependencies":[{"path":"/home/lq/ifb/src/eshop/frontend/src/api/commands.js","mtime":1583132470972},{"path":"/home/lq/ifb/src/eshop/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/lq/ifb/src/eshop/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/lq/ifb/src/eshop/frontend/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0IHsgcmVtb3ZlUHJlZml4IH0gZnJvbSAnLi91dGlscyc7CmltcG9ydCB7IGJhc2VVUkwgfSBmcm9tICdAL3V0aWxzL2NvbnN0YW50cyc7CmltcG9ydCBzdG9yZSBmcm9tICdAL3N0b3JlJzsKdmFyIHNzbCA9IHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCA9PT0gJ2h0dHBzOic7CnZhciBwcm90b2NvbCA9IHNzbCA/ICd3c3M6JyA6ICd3czonOwpleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjb21tYW5kKHVybCwgY29tbWFuZCwgb25tZXNzYWdlLCBvbmNsb3NlKSB7CiAgdXJsID0gcmVtb3ZlUHJlZml4KHVybCk7CiAgdXJsID0gIiIuY29uY2F0KHByb3RvY29sLCAiLy8iKS5jb25jYXQod2luZG93LmxvY2F0aW9uLmhvc3QpLmNvbmNhdChiYXNlVVJMLCAiL2FwaS9jb21tYW5kIikuY29uY2F0KHVybCwgIj9hdXRoPSIpLmNvbmNhdChzdG9yZS5zdGF0ZS5qd3QpOwogIHZhciBjb25uID0gbmV3IHdpbmRvdy5XZWJTb2NrZXQodXJsKTsKCiAgY29ubi5vbm9wZW4gPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gY29ubi5zZW5kKGNvbW1hbmQpOwogIH07CgogIGNvbm4ub25tZXNzYWdlID0gb25tZXNzYWdlOwogIGNvbm4ub25jbG9zZSA9IG9uY2xvc2U7Cn0="},{"version":3,"sources":["/home/lq/ifb/src/eshop/frontend/src/api/commands.js"],"names":["removePrefix","baseURL","store","ssl","window","location","protocol","command","url","onmessage","onclose","host","state","jwt","conn","WebSocket","onopen","send"],"mappings":";AAAA,SAASA,YAAT,QAA6B,SAA7B;AACA,SAASC,OAAT,QAAwB,mBAAxB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AAEA,IAAMC,GAAG,GAAIC,MAAM,CAACC,QAAP,CAAgBC,QAAhB,KAA6B,QAA1C;AACA,IAAMA,QAAQ,GAAIH,GAAG,GAAG,MAAH,GAAY,KAAjC;AAEA,eAAe,SAASI,OAAT,CAAiBC,GAAjB,EAAsBD,OAAtB,EAA+BE,SAA/B,EAA0CC,OAA1C,EAAmD;AAChEF,EAAAA,GAAG,GAAGR,YAAY,CAACQ,GAAD,CAAlB;AACAA,EAAAA,GAAG,aAAMF,QAAN,eAAmBF,MAAM,CAACC,QAAP,CAAgBM,IAAnC,SAA0CV,OAA1C,yBAAgEO,GAAhE,mBAA4EN,KAAK,CAACU,KAAN,CAAYC,GAAxF,CAAH;AAEA,MAAIC,IAAI,GAAG,IAAIV,MAAM,CAACW,SAAX,CAAqBP,GAArB,CAAX;;AACAM,EAAAA,IAAI,CAACE,MAAL,GAAc;AAAA,WAAMF,IAAI,CAACG,IAAL,CAAUV,OAAV,CAAN;AAAA,GAAd;;AACAO,EAAAA,IAAI,CAACL,SAAL,GAAiBA,SAAjB;AACAK,EAAAA,IAAI,CAACJ,OAAL,GAAeA,OAAf;AACD","sourcesContent":["import { removePrefix } from './utils'\nimport { baseURL } from '@/utils/constants'\nimport store from '@/store'\n\nconst ssl = (window.location.protocol === 'https:')\nconst protocol = (ssl ? 'wss:' : 'ws:')\n\nexport default function command(url, command, onmessage, onclose) {\n  url = removePrefix(url)\n  url = `${protocol}//${window.location.host}${baseURL}/api/command${url}?auth=${store.state.jwt}`\n\n  let conn = new window.WebSocket(url)\n  conn.onopen = () => conn.send(command)\n  conn.onmessage = onmessage\n  conn.onclose = onclose\n}\n"]}]}